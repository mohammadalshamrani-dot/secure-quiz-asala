
<!doctype html>
<html lang="ar" dir="rtl"><head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>لوحة الإدارة</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  
<header>
  <div class="container header-inner">
    <div class="brand">
      <img src="logo.png" alt="شعار الأصالة" />
      <div class="title">كليات الأصالة – كلية القانون</div>
    </div>
    <nav>
      <a href="index.html">الرئيسية</a>
      <a href="instructions.html">تعليمات سريعة</a>
      <a href="contact.html">تواصل مع الإدارة</a>
      <a href="login.html">دخول أعضاء هيئة التدريس</a>
      <a href="admin.html">الإدارة</a>
    </nav>
  </div>
</header>

  <main class="container">
    <h2>لوحة الإدارة</h2>
    <div id="guard" class="warning" style="display:none">هذه الصفحة للإدمن فقط. يرجى تسجيل الدخول بحساب الإدمن.</div>
    <div id="content" style="display:none">
      <div class="card">
        <h3>الوارد من نموذج التواصل</h3>
        <div id="inboxWrap"></div>
      </div>
    </div>
  </main>
  
<footer class="footer">تم تطوير المنصة بواسطة د. محمد الشمراني</footer>

  <script>
    const me = JSON.parse(localStorage.getItem('currentUser')||'null');
    if(!me || me.role!=='admin'){ document.getElementById('guard').style.display='block'; }
    else {
      document.getElementById('content').style.display='block';
      const inbox = JSON.parse(localStorage.getItem('adminInbox')||'[]');
      const wrap = document.getElementById('inboxWrap');
      if(inbox.length===0) wrap.innerHTML='<div class="notice">لا توجد رسائل</div>';
      else {
        let html='<table class="table"><tr><th>التاريخ</th><th>المرسل</th><th>الموضوع</th><th>الرسالة</th></tr>';
        inbox.forEach(m=>{ html += `<tr><td>${new Date(m.ts).toLocaleString('ar-SA')}</td><td>${m.name}<br>${m.email}</td><td>${m.subject}</td><td style="text-align:right">${m.body}</td></tr>`; });
        html+='</table>'; wrap.innerHTML=html;
      }
    }
  </script>
</body></html>
